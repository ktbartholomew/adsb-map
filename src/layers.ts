import { Map, PaintSpecification } from "mapbox-gl";
import { Position } from "geojson";

const styles: Record<string, PaintSpecification> = {
  iap: {
    "line-opacity": 0.5,
    "line-color": "#FFF",
    "line-width": 1,
    "line-dasharray": [2, 2],
  },
  dp: {
    "line-opacity": 0.3,
    "line-color": "#0FF",
    "line-width": 1,
    "line-dasharray": [6, 6],
  },
  star: {
    "line-opacity": 0.6,
    "line-color": "#F0F",
    "line-width": 1,
    "line-dasharray": [6, 6],
  },
};

const paths: Record<
  string,
  { flow?: "N" | "S"; type: "iap" | "star" | "dp"; coordinates: Position[] }
> = {
  "36L": {
    flow: "N",
    type: "iap",
    coordinates: [
      [-97.05631388888888, 32.5933],
      [-97.05604166666666, 32.64590555555556],
      [-97.05549444444443, 32.750902777777775],
      [-97.05528333333334, 32.79179722222222],
      [-97.05495555555555, 32.855608333333336],
    ],
  },
  "35C": {
    flow: "N",
    type: "iap",
    coordinates: [
      [-97.02770277777778, 32.59319722222222],
      [-97.02742222222223, 32.6458],
      [-97.02685833333334, 32.75083055555555],
      [-97.02658888888888, 32.80134722222222],
      [-97.02768055555555, 32.87614444444444],
    ],
  },
  "35R": {
    flow: "N",
    type: "iap",
    coordinates: [
      [-97.01147777777778, 32.59313055555556],
      [-97.01119444444444, 32.644149999999996],
      [-97.01060833333334, 32.74935833333333],
      [-97.01036666666667, 32.79277777777778],
      [-97.01119444444444, 32.87186666666667],
    ],
  },
  JOVEM: {
    flow: "N",
    type: "star",
    coordinates: [
      [-97.64171111111112, 33.3839],
      [-97.5176, 33.27838888888889],
      [-97.33484999999999, 33.12219722222222],
      [-97.17081111111112, 32.98148055555556],
      [-97.16080000000001, 32.799477777777774],
      [-97.16080000000001, 32.594008333333335],
    ],
  },
  SOCKK: {
    flow: "N",
    type: "star",
    coordinates: [
      [-97.62483888888889, 32.382600000000004],
      [-97.51728333333334, 32.47698333333334],
      [-97.28223333333334, 32.499125],
    ],
  },
  NELYN6_W_S: {
    flow: "S",
    type: "dp",
    coordinates: [
      [-97.05426666666666, 32.707825],
      [-97.10468333333333, 32.546366666666664],
      [-97.18591111111111, 32.28496111111111],
    ],
  },
  NELYN6_E_S: {
    flow: "S",
    type: "dp",
    coordinates: [
      [-97.03014722222223, 32.70772222222222],
      [-96.97913333333334, 32.60811944444445],
      [-97.01210555555555, 32.55676666666666],
      [-97.18591111111111, 32.28496111111111],
    ],
  },
  JAPSA_7_W_S: {
    flow: "S",
    type: "dp",
    coordinates: [
      [-97.05426666666666, 32.707825],
      [-97.05613888888888, 32.54083055555555],
      [-97.05899166666666, 32.28503055555555],
    ],
  },
  JAPSA_7_E_S: {
    flow: "S",
    type: "dp",
    coordinates: [
      [-96.97913333333334, 32.60811944444445],
      [-96.99331666666667, 32.550916666666666],
      [-97.05899166666666, 32.28503055555555],
    ],
  },
  ARDIA_7_W_S: {
    flow: "S",
    type: "dp",
    coordinates: [
      [-97.05426666666666, 32.707825],
      [-97.055325, 32.60762777777778],
      [-97.03201666666666, 32.54380833333333],
      [-96.93786666666666, 32.28507222222222],
    ],
  },
  ARDIA_7_E_S: {
    flow: "S",
    type: "dp",
    coordinates: [
      [-96.97913333333334, 32.60811944444445],
      [-96.97168888888889, 32.55000833333333],
      [-96.93786666666666, 32.28507222222222],
    ],
  },
  DARTZ_9_W_S: {
    flow: "S",
    type: "dp",
    coordinates: [
      [-97.055325, 32.60762777777778],
      [-97.01324722222222, 32.55111944444444],
      [-96.81105, 32.28575555555555],
    ],
  },
  DARTZ_9_E_S: {
    flow: "S",
    type: "dp",
    coordinates: [
      [-96.97913333333334, 32.60811944444445],
      [-96.96035277777779, 32.56971111111111],
      [-96.81105, 32.28575555555555],
    ],
  },
  LOWGN8_S: {
    flow: "S",
    type: "dp",
    coordinates: [
      [-97.27038611111111, 33.00171944444445],
      [-97.24980277777777, 33.45075],
    ],
  },
  BLECO8_S: {
    flow: "S",
    type: "dp",
    coordinates: [
      [-97.080975, 32.77548888888889],
      [-97.141125, 32.76547222222222],
      [-97.241325, 32.77160277777778],
      [-97.27428888888889, 32.84090277777778],
      [-97.27038611111111, 33.00171944444445],
      [-97.10905277777778, 33.45075],
    ],
  },
  GRABE8_S: {
    flow: "S",
    type: "dp",
    coordinates: [
      [-97.27038611111111, 33.00171944444445],
      [-96.96152777777777, 33.451458333333335],
    ],
  },
  AKUNA9_S: {
    flow: "S",
    type: "dp",
    coordinates: [
      [-97.27038611111111, 33.00171944444445],
      [-96.82313888888889, 33.45068888888889],
    ],
  },

  ALIAN2_S: {
    flow: "S",
    type: "dp",
    coordinates: [
      [-97.05426666666666, 32.707825],
      [-97.13733333333334, 32.69102777777778],
      [-97.734, 32.678041666666665],
    ],
  },
  KATZZ2_S: {
    flow: "S",
    type: "dp",
    coordinates: [
      [-97.13733333333334, 32.69102777777778],
      [-97.25506388888888, 32.69800277777777],
      [-97.73395000000001, 32.778238888888886],
    ],
  },
  HRPER3_S: {
    flow: "S",
    type: "dp",
    coordinates: [
      [-97.241325, 32.77160277777778],
      [-97.733275, 32.88948333333333],
    ],
  },
  HUDAD_S: {
    flow: "S",
    type: "dp",
    coordinates: [
      [-97.241325, 32.77160277777778],
      [-97.733275, 32.989894444444445],
    ],
  },
  BOOVE7: {
    flow: "S",
    type: "star",
    coordinates: [
      [-97.40781944444446, 32.57273888888889],
      [-97.29787777777777, 32.668613888888885],
      [-97.16752222222223, 32.781927777777774],
      [-97.16507777777778, 32.99619166666667],
      [-97.16278055555556, 33.197125],
    ],
  },
};

export function addLayers(map: Map) {
  const flow = "S";

  for (const key in paths) {
    if (paths[key].flow && paths[key].flow !== flow) {
      continue;
    }

    map.addSource(key, {
      type: "geojson",
      data: {
        type: "Feature",
        properties: {},
        geometry: {
          type: "LineString",
          coordinates: paths[key].coordinates,
        },
      },
    });

    map.addLayer({
      id: key,
      type: "line",
      source: key,
      layout: {
        "line-join": "round",
        "line-cap": "butt",
      },
      paint: styles[paths[key].type],
    });
  }
}
